<?xml version="1.0" encoding="utf-8"?>
<!-- This can be converted using the Web service at https://xml2rfc.tools.ietf.org/ -->
<!DOCTYPE rfc SYSTEM "rfc2629-xhtml.ent">
<?rfc toc="yes"?>
<!-- You want a table of contents -->
<?rfc symrefs="yes"?>
<!-- Use symbolic labels for references -->
<?rfc sortrefs="yes"?>
<!-- This sorts the references -->
<?rfc iprnotified="no" ?>
<!-- Change to "yes" if someone has disclosed IPR for the draft -->
<?rfc compact="yes"?>
<!-- This defines the specific filename and version number of your draft (and inserts the appropriate IETF boilerplate -->
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" category="std" docName="draft-ietf-6man-rfc6874bis-06X" ipr="trust200902" obsoletes="6874" updates="3986, 3987" submissionType="IETF" xml:lang="en" tocInclude="true" symRefs="true" sortRefs="true" version="3">
  <!-- xml2rfc v2v3 conversion 2.44.0 -->
<front>
    <title abbrev="IPv6 Zone IDs in URIs">Representing IPv6 Zone Identifiers in Address Literals and Uniform Resource Identifiers</title>
    <seriesInfo name="Internet-Draft" value="draft-ietf-6man-rfc6874bis-06X"/>
    
    <author initials="B." surname="Carpenter" fullname="Brian Carpenter">
      <organization abbrev="Univ. of Auckland"/>
      <address>
        <postal>
          <postalLine>School of Computer Science</postalLine>
          <postalLine>University of Auckland</postalLine>
          <postalLine>PB 92019</postalLine>
          <postalLine>Auckland 1142</postalLine>
          <postalLine>New Zealand</postalLine>
        </postal>
        <email>brian.e.carpenter@gmail.com</email>
      </address>
    </author>
    
    <author initials="S." surname="Cheshire" fullname="Stuart Cheshire">
      <organization abbrev="Apple Inc.">
        Apple Inc.
      </organization>
      <address>
        <postal>
          <postalLine>1 Infinite Loop</postalLine>
          <postalLine>Cupertino, CA 95014</postalLine>
          <postalLine>USA</postalLine>
        </postal>
        <email>cheshire@apple.com</email>
      </address>
    </author>
    

    <author fullname="Robert M. Hinden" initials="R" surname="Hinden">
      <organization>Check Point Software</organization>
      <address>
        <postal>
          <postalLine>959 Skyway Road</postalLine>
          <postalLine>San Carlos, CA 94070</postalLine>
          <postalLine>USA</postalLine>
        </postal>
        <phone/>
        <email>bob.hinden@gmail.com</email>
      </address>
    </author>
    
    
        <area>Internet</area>
    <workgroup>6MAN</workgroup>
    <!-- [rfced] Please insert any keywords (beyond those that appear in
the title) for use on http://www.rfc-editor.org/rfcsearch.html. 

<keyword>example</keyword>
-->

<abstract>
      <t>This document describes how the zone identifier of an IPv6 scoped address, defined
as &lt;zone_id&gt; in the IPv6 Scoped Address Architecture (RFC 4007), can be
represented in a literal IPv6 address and in a Uniform Resource Identifier 
that includes such a literal address. It updates the URI Generic Syntax
and Internationalized Resource Identifier
specifications (RFC 3986, RFC 3987) accordingly, and obsoletes RFC 6874.

</t>
    </abstract>
    
<note removeInRFC="true">
  <name>Discussion Venue</name>
      <t>Discussion of this document takes place on the
  6MAN mailing list (ipv6@ietf.org),
  which is archived at <eref target="https://mailarchive.ietf.org/arch/browse/ipv6/">https://mailarchive.ietf.org/arch/browse/ipv6/</eref>.</t>
</note>
    
    
    
    
  </front>
  <middle>
    <section anchor="intro" numbered="true">
      <name>Introduction</name>
      <t>The Uniform Resource Identifier (URI) syntax specification <xref target="RFC3986"/> defined how a
literal IPv6 address can be represented in the "host" part of a URI.
Later, the IPv6 Scoped Address Architecture specification <xref target="RFC4007"/> extended
the text representation of limited-scope IPv6 addresses such that a zone identifier may be concatenated
to a literal address, for purposes described in that specification. Zone identifiers are especially
useful in contexts in which literal addresses are typically used, for example, during fault diagnosis,
when it may be essential to specify which interface is used for sending to a link-local address. 
It should be noted that zone identifiers have purely local meaning within the node in which
they are defined, usually being the same as IPv6 interface names. They are completely meaningless
for any other node. Today, they are meaningful only when attached to link-local addresses,
but it is possible that other uses might be defined in the future. </t>

      <t>The IPv6 Scoped Address Architecture specification
      does not specify how zone identifiers are to be represented
in URIs. Practical experience has shown that this feature is useful or necessary, 
 in various use cases, including the following:</t>
<ol>
   <li>A web browser may be used for simple debugging actions 
   involving link-local addresses on a host with more than one active
   link interface. For example, the existence of a device may today be checked
   via "ping fe80::1234%eth0" but not via "https://[fe80::1234%eth0]".</li>

   <li>A web browser must sometimes be used to configure or reconfigure a
   device which only has a link-local address and whose only
   configuration tool is a web server, again in a host with
   more than one active link interface. For example, a typical
   home router may today be configured via "http://192.168.178.1"
   but not via "http://[fe80::1%eth0]".</li>

   <li>The Apple and open-source CUPS printing
   mechanism <xref target="CUPS"/> <xref target="OP-CUPS"/>
   uses an HTTP-based protocol <xref target="RFC3510"/><xref target="RFC7472"/>
   to establish link-local relationships, so requires the specification of the
   relevant interface.</li>
   
   <li>The Microsoft Web Services for Devices (WSD) virtual printer
   port mechanism can generate an IPv6 link-local URL such as
   "http://[fe80::823b:f9ff:fe7b:d9dc%10]:80/WebServices/Device"
   in which the zone identifier is present, but is not recognized by
   any current browser.</li>
</ol>

<t>For these use cases, it is highly desirable that a complete IPv6 link-local
address can be cut and pasted from one context (such as the output
from a system command) to another (such as a browser dialogue box). Since such
addresses may include quite long hexadecimal strings, any solution except
cut-and-paste is highly error prone.</t>

<t>The use cases listed above apply to relatively simple actions
on end systems, not to network infrastructure devices. The latter may
have large numbers of interfaces, which are
commonly named for network management purposes in styles such as
"Ethernet1/0/1" or "ge-0/0/0.0", reflecting the hardware structure and
depending on the manufacturer.
The present specification does not intend to support such names,
which commonly involve upper case and non-alphanumeric characters.
Generally speaking they are handled by various network management
mechanisms and specialized commands, so there is no requirement
to support them in URIs.</t>

<t>As IPv6 deployment becomes widespread, the lack of a solution for
handling complete link-local addresses in web browsers is becoming an acute
problem for increasing numbers of operational and support personnel.
It will become critical as IPv6-only networks, with no native
IPv4 support, appear.
This is the principal reason for documenting this requirement and its solution now.</t>

<t>It should be noted that whereas some operating systems and network APIs
support a default zone identifier as described in <xref target="RFC4007"/>,
others do not, and for them an appropriate URI syntax is particularly important.</t>

<t>In the past, some browser versions directly accepted the IPv6 Scoped Address
syntax
for scoped IPv6 addresses embedded in URIs, i.e., they were coded to
interpret a "%" sign following the literal address as introducing a zone
identifier, instead of introducing two hexadecimal
characters representing some percent-encoded octet as explained in
Section 2.1 of <xref target="RFC3986"/>. Clearly, 
interpreting the "%" sign as introducing a zone identifier is very convenient
for users, although it is not supported by
the URI syntax in RFC 3986 or the Internationalized Resource Identifier (IRI)
syntax in <xref target="RFC3987"/>.
Therefore, this document updates RFC 3986 and RFC 3987 by adding syntax to allow a zone identifier
to be included in a literal IPv6 address within a URI. </t>

<t>It should be noted that in contexts other than a user interface, a zone identifier is mapped into
a numeric zone index or interface number. The MIB textual convention InetZoneIndex <xref target="RFC4001"/> and the
socket interface <xref target="RFC3493"/> define this as a 32-bit unsigned integer.
(However, note that interface numbers are limited to positive signed 32-bit
integers (see InterfaceIndex defined in <xref target="RFC2863"/> and if-index
defined in <xref target="RFC8343"/>) while the zone index allows for unsigned
32-bit integers.)</t>

<t>The mapping
between the human-readable zone identifier string and the numeric value is a host-specific
function that varies between operating systems. The present document is concerned only
with the human-readable string. </t>

      <t>Several alternative solutions were considered while this document was developed. Appendix
A briefly describes the various options and their advantages and disadvantages. </t>

<t>This document obsoletes its predecessor <xref target="RFC6874"/> by greatly
simplifying its recommendations and requirements for URI parsers.
Its effect on the formal URI syntax <xref target="RFC3986"/> is different
from that of RFC 6874.</t>

<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and
   only when, they appear in all capitals, as shown here.
</t>
</section>
<!-- intro -->

<section anchor="issues" numbered="true">
      <name>Issues with Implementing RFC 6874</name>
<t>Several issues prevented RFC 6874 being implemented in browsers:</t>
<ol>
  <li>There was some disagreement with requiring percent-encoding of the "%" sign preceding a zone identifier.
  This requirement is dropped in the present document.</li>
  <li>The requirement to delete any zone identifier before emitting a URI from the host in an HTTP message
  was considered both too complex to implement and in violation of normal HTTP practice <xref target="RFC9110"/>.
  This requirement has been dropped from the present document.</li>
  <li>The suggestion to pragmatically allow a bare "%" sign when this would be unambiguous was considered both
  too complex to implement and confusing for users. This suggestion has been dropped from the present document
  since it is now irrelevant.</li>
</ol>
</section>
<!-- issues -->

<section anchor="spec" numbered="true">
      <name>Specification</name>
      <t>According to IPv6 Scoped Address syntax <xref target="RFC4007"/>, a zone identifier is attached to the textual representation of an IPv6
address by concatenating "%" followed by &lt;zone_id&gt;, where &lt;zone_id&gt; is a string identifying the zone of the address.
However, the IPv6 Scoped Address Architecture specification gives no precise definition of the character set allowed in &lt;zone_id&gt;.
There are no rules or de facto standards for this. For example, the first Ethernet interface in a host
might be called %0, %1, %25, %en1, %eth0, or whatever the implementer happened to choose.</t>

<t>In a URI, a literal IPv6 address is always embedded between "[" and
    "]". This document specifies how a zone identifier can be appended to the
    address. The URI syntax defined by <xref target="RFC3986"/> does not allow the
    presence of a percent ("%") character within an IPv6 address literal. For this
    reason, it is backwards compatible to allow the use of "%" within an
    IPv6 address literal as a delimiter only, such that the scoped address
    "fe80::abcd%en1" would appear in a URI as "http://[fe80::abcd%en1]" or
    "https://[fe80::abcd%en1]".</t>

<t>This use of "%" as a delimiter applies only within an IPv6 address literal, and
    is irrelevant to and exempt from the percent-encoding mechanism of
    RFC 3986.</t>
 
<t>A zone identifier MUST contain only ASCII characters classified 
as "unreserved" for use in URIs by RFC 3986. This excludes characters such as
"/", "]" or even "%" that would complicate parsing. 
For the avoidance of doubt, note that a zone identifier consisting of "25" or
starting with "25" is valid and is used in some operating systems. A parser
MUST NOT apply percent decoding to the IPv6 address literal in a URI,
including cases such as
"http://[fe80::abcd%25]" and "http://[fe80::abcd%25xy]".
</t>
      <t>If an operating system uses any characters in zone or interface identifiers
      that are not in the "unreserved" character set, identifiers including them
      cannot be used in a URI.</t>
      <t>If an operating system supports case-sensitive zone or interface identifiers,
      identifiers including upper case letters cannot be used in a URI.</t>
      <t>We now present the corresponding formal syntax. </t>
      <t>
The URI syntax specification in RFC 3986 formally defines the
IPv6 literal format in ABNF <xref target="RFC5234"/> by the following rule:
</t>
      <artwork name="" type="" align="left" alt=""><![CDATA[
   IP-literal = "[" ( IPv6address / IPvFuture  ) "]"
]]></artwork>
      <t>To provide support for a zone identifier, 
the existing syntax of IPv6address is retained, and a zone identifier may be
added optionally to any literal address. This syntax allows flexibility for unknown future
uses. The rule quoted above from RFC 3986 is replaced by three rules:</t>

<artwork name="" type="" align="left" alt=""><![CDATA[
   IP-literal = "[" ( IPv6address / IPv6addrz / IPvFuture  ) "]"
   
   ZoneID = 1*( unreserved )
   
   IPv6addrz = IPv6address "%" ZoneID
]]></artwork>

<t>This change also applies to <xref target="RFC3987"/>.</t>


      <t>This syntax fills the gap that is described at the end of Section 11.7 of
the IPv6 Scoped Address Architecture specification <xref target="RFC4007"/>. It replaces
and obsoletes the syntax in Section 2 of <xref target="RFC6874"/>.</t>
      <t>The established rules for textual representation of IPv6 addresses <xref target="RFC5952"/> SHOULD be applied in producing URIs. </t>
      <t>RFC 3986 states that URIs have a global scope, but that in some cases their
interpretation depends on the end-user's context. URIs including a zone identifier are
an example of this, since the zone identifier is of local significance only. Such a zone identifier cannot be correctly
interpreted outside the host to which it applies, so it must be treated as an opaque string.</t>
    <t>RFC 3986 also states that the host subcomponent of a URI is case-insensitive and is normalized to lower case.
     Section 6.2.2.1 of RFC 3986 states unambiguously that
    "the scheme and host are case-insensitive and therefore should be normalized to
   lowercase". The mechanism described here will therefore fail for zone identifiers that contain upper case letters,
    since RFC 4007 implies case-sensitivity. This specification therefore RECOMMENDS the
    use of lower case letters only when assigning zone identifiers to interfaces.
    </t>
      <t>RFC 4007 offers guidance on how the zone identifier affects interface/address selection
inside the IPv6 stack. Note that the behaviour of an IPv6 stack, if it is passed a non-null
zone index for an address other than link-local, is undefined. </t>

<t>In cases where the RFC 6874 encoding is currently used between specific software
components rather than between a browser and a web server, such usage MAY continue indefinitely.</t>
    </section>
    <!-- spec  -->
    
<section anchor="scope" numbered="true">
<name>Scope and Deployment</name>
<t>A URI (or IRI) using this format has no meaning outside the scope of the individual host that originates
it and of the specific layer 2 link concerned. It may in fact be delivered in an HTTP message to a server
that does not support this format and which will reject the message as invalid. For the diagnostic use cases
concerned, this is of no importance: an HTTP error response will serve the diagnostic
purpose of establishing that the link and remote host are operational. The other use cases shown above
are only meaningful if the remote host also accepts this format; otherwise they
will fail with an HTTP error response. As a result, this format can be deployed 
progressively as required, with no wider consequences.</t>

<t>It is worth noting that there is nothing new about a URI that refers to a local
resource. URIs referring to local domains under ".local" are normal.
Any URI such as "https://169.254.0.1" (link-local IPv4, <xref target="RFC3927"/>),
"https://10.1.1.1" (private IPv4, <xref target="RFC1918"/>),
or "https://[fd63:45eb:cd14:0:80b2:5c79:62ae:d341]" (IPv6 unique local address, <xref target="RFC4193"/>)
refers to a local resource and has no meaning off the link or outside the local domain.
In operating systems with support for a default zone identifier, URLs such
as "https://[fe80::2e3a:12cd:fea4:dde7]" already work as expected.
Deployment of support for link-local IPv6 addresses with zone identifiers introduces
no new principle compared to these four currently operational cases.</t>

</section>

<section anchor="browsers" numbered="true">
      <name>URI Parsers</name>
      <t>This section discusses how URI (or IRI) parsers, such as those embedded in web browsers,
       might handle this syntax extension.</t>
       
<t>In practice, although parsers respect the established syntax, many are coded
pragmatically rather than being formally syntax-driven. Typically, IP address
literals are handled by an explicit code path. Parsers have been
inconsistent in providing for zone identifiers. Most have no support, but there
have been examples of ad hoc support. For example, some versions of Firefox allowed the
use of a zone identifier preceded by a bare "%" character, but 
this feature was removed for consistency with the established syntax of RFC 3986.
As another example, some
versions of Internet Explorer allowed use of a zone identifier preceded by a "%"
character encoded as "%25", still beyond the syntax allowed by the established
rules. This
syntax extension is in fact used internally in the Windows operating system and some
of its APIs. </t>
      <t>URI parsers SHOULD accept a zone identifier according to the syntax
      defined in <xref target="spec"/>, rather than treating the URI as
      invalid as they do today. An IPv6 address literal never contains percent-encodings.
      In terms of Section 2.4 of <xref target="RFC3986"/>, the "%" character
      preceding a zone identifier is acting as a delimiter, not as data.
      Any code handling percent-encoding or percent-decoding must be aware of this.
      </t>
      <t>As noted above, a zone identifier included in a URI has no meaning outside the
      originating HTTP client node. However, in some use cases,
      such as CUPS, the host address embedded in the URI 
      will be reflected back to the client, using exactly the
      representation of the zone identifier that the client sent.

</t>
      <t>The various use cases for the zone identifier syntax will usually require 
      it to be entered in a browser's input dialogue box. However, URIs including a
      zone identifier might occur in HTML documents. For example, a diagnostic script
      in an HTML page
      might be tailored for a particular host. Because of such usage, it is
      appropriate for browsers to treat such URIs in the same way whether they
      are entered in the dialogue box or encountered in an HTML document.</t>
    </section>
    <!-- browsers -->

<section anchor="security" numbered="true">
      <name>Security Considerations</name>
      <t>The security considerations from the URI syntax specification <xref target="RFC3986"/>
      and the IPv6 Scoped Address Architecture specification <xref target="RFC4007"/> apply. 
      In particular, this URI format creates a specific pathway by which a deceitful zone
      index might be communicated, as mentioned in the final security consideration
      of the Scoped Address Architecture specification.
</t>
      <t>However, this format is only meaningful for
      link-local addresses under prefix fe80::/10. It is not necessary for
      web browsers to verify this, or to validate the zone identifier, because
      the operating system will do so when the address is passed to
      the socket API, and return an error code if the zone identifier is invalid.
</t>

      <t>A zone identifier in a URI will be revealed to the recipient of an HTTP message
      containing it (typically in the "Host" field <xref target="RFC9110"/>). 
      A server that receives a zone identifier in an HTTP message or otherwise
      SHOULD NOT make use of it, for validation of authority or any other purpose,
      since it has no meaning outside the originating host.</t>
      
      <t>Such visibility of the zone identifier to a server is at most
      a minor security concern, since the information revealed is of
      local significance only and will be exploitable only if both the client host
      and the server have both already been compromised. </t>
      
      <t>Unfortunately there is no formal limit on the length of the zone identifier
      string in RFC 4007. An implementation SHOULD apply a reasonable
      length limit when generating a URI, in order
      to minimize the risk of a buffer overrun. For example, a limit to 16 ASCII characters
      would correspond to the existing limit on Linux interface names.</t>
      
      <t>An implementation SHOULD NOT include ASCII NULL characters in a zone identifier
      string as this could cause inconsistencies in subsequent string processing.</t>
      
      <t>It is conceivable that this format could be misused to remotely probe a local network
      configuration or to fingerprint a host. In particular, a script included in an HTML web page could originate
      HTTP messages intended to determine if a particular link-local address is valid,
      for example to discover and misuse the address of the first-hop router. However,
      such attacks are already possible, by probing IPv4 addresses, routeable IPv6 addresses
      or link-local addresses without a zone identifier. Indeed, with a zone identifier
      present, the attacker's job is harder because they must also guess the zone
      identifier itself; the zone identifier increases the search space compared to
      guessing only the interface identifier. Zone identifiers vary widely between
      operating systems; in some cases they are easily guessed small integers or conventional
      names such as "eth0" but in other cases they contain arbitrary characters
      derived from MAC addresses. In any case, an attacker must discover them
      before probing any link-local addresses. This argues against the recommendation
      of <xref target="RFC4007"/> to support a default zone identifier.
      Nevertheless, the principal defence against scanning attacks remains
      the 64 bit size of the IPv6 interface identifier <xref target="RFC7707"/>.</t>
      
      <t>In the case that a zone identifier contains the hexadecimal MAC address
      of a network interface, it will be revealed to the HTTP recipient and to any
      observer on the link. Since the MAC address will also be visible
      in the underlying layer 2 frame, this is not a new exposure.
      Nevertheless, this method of naming interfaces might be considered
      to be a privacy issue.</t>
      
      <t>It should be noted that if a node uses an interface identifier in the outdated
      Modified EUI format <xref target="RFC4291"/> for its link-local address, the
      search space for an attacker is very significantly reduced, as discussed in
      Section 4.1.1.1 of <xref target="RFC7707"/>. The resultant recommendations
      of <xref target="RFC8064"/> apply to all nodes, including routers, since they
      ensure that the search space for an attacker is of size 2**64, which is
      impracticably large.
      </t>
      
      <t>Nevertheless, even a Modified EUI link-local address
      is significantly harder to guess than typical IPv4 addresses for devices such
      as home routers, which are often included in published documentation.</t>

    </section>
    <!-- security -->

    <section anchor="iana-considerations">
      <name>IANA Considerations</name>
      <t>This document makes no request of IANA.</t>
    </section>



    
<!-- <section anchor="contributors" numbered="true" toc="default">
      <name>Contributor</name>

        <t>A co-author of RFC 6874 was:</t>

    <contact initials="S." surname="Cheshire" fullname="Stuart Cheshire">
      <organization abbrev="Apple Inc.">
        Apple Inc.
      </organization>
      <address>
        <postal>
          <postalLine>1 Infinite Loop</postalLine>
          <postalLine>Cupertino, CA 95014</postalLine>
          <postalLine>USA</postalLine>
        </postal>
        <email>cheshire@apple.com</email>
      </address>
    </contact>
  </section> -->



</middle>
  <back>
    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3986.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3987.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.4007.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.5952.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8064.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>
        <!-- &RFC5234; -->
<xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.5234.xml"/>
      </references>
      <references>
        <name>Informative References</name>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.1918.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3927.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.4193.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.2863.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.8343.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3493.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.4001.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.4291.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.6874.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.9110.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.3510.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7472.xml"/>
        <xi:include href="https://xml2rfc.ietf.org/public/rfc/bibxml/reference.RFC.7707.xml"/>
        
   <reference anchor="LITERAL-ZONE">
          <front>
            <title>Formats for IPv6 Scope Zone Identifiers in Literal Address Formats</title>
            <author initials="B." surname="Fenner" fullname="B. Fenner">
              <organization/>
            </author>
            <author surname="Dürst" initials="M." fullname="Martin Dürst" asciiSurname="Duerst" asciiFullname="Martin Duerst">
              <organization/>
            </author>
            <date month="October" year="2005"/>
          </front>
          <seriesInfo name="Work in" value="Progress"/>
    </reference>
        
    <reference anchor="CUPS" target="https://www.cups.org/">
          <front>
            <title>Apple CUPS</title>
            <author fullname="Apple"/>
            <date year="2022"/>
          </front>
    </reference>
    
    <reference anchor="OP-CUPS" target="https://openprinting.github.io/cups/">
          <front>
            <title>OpenPrinting CUPS</title>
            <author fullname="M. Sweet"/>
            <date year="2022"/>
          </front>
    </reference>
        
      </references>
    </references>
    <section anchor="AppendixA" numbered="true">
      <name>Options Considered</name>

      <t>The syntax defined above allows a zone identifier to be added to any
IPv6 address. The 6man WG discussed and rejected an alternative in which
the existing syntax of IPv6address would be extended by an option
to add the zone identifier only for the case of link-local addresses. It
was felt that the solution presented in this document offers more flexibility for
future uses and is more straightforward to implement.
</t>
      <t>The various syntax options considered are now briefly described.</t>
      <ol spacing="normal" type="1"><li>
          <t>Leave the problem unsolved.
</t>
          <t>
This would mean that per-interface diagnostics would still have to be performed using ping or ping6:
</t>
          <t>
   ping fe80::abcd%en1
</t>
          <t> 
Advantage: works today.
</t>
          <t> 
Disadvantage: less convenient than using a browser. Leaves some use cases unsatisfied.
</t>
          <t/>
        </li>
        <li>
          <t>Simply use the percent character:
</t>
          <t> 
   http://[fe80::abcd%en1]
</t>
          <t>
Advantage: allows use of browser; allows cut and paste.
</t>
          <t>
Disadvantage: requires code changes to all URI parsers.
</t>
<t>
This is the option chosen for standardisation.
</t>
        </li>
        <li>
          <t>Simply use an alternative separator:
</t>
          <t> 
    http://[fe80::abcd-en1]
</t>
          <t>
Advantage: allows use of browser; simple syntax.
</t>
          <t> 
Disadvantage: Requires all IPv6 address literal parsers and
generators to be updated in order to allow simple cut and paste; inconsistent
with existing tools and practice.
</t>
          <t> 
Note: The initial proposal for this choice was to use an underscore
as the separator, but it was noted that this becomes effectively invisible when
a user interface automatically underlines URLs.
</t>
          <t/>
        </li>
        <li>
          <t>Simply use the "IPvFuture" syntax left open in RFC 3986:
</t>
          <t>
    http://[v6.fe80::abcd-en1]
</t>
          <t>
Advantage: allows use of browser.
</t>
          <t>
Disadvantage: ugly and redundant; doesn't allow simple cut and paste.
</t>
          <t/>
        </li>
        <li>
          <t>Retain the percent character already specified for introducing
       zone identifiers for IPv6 Scoped Addresses <xref target="RFC4007"/>, and then
       percent-encode it when it appears in a URI, according to the
       already-established URI syntax rules <xref target="RFC3986"/>:
</t>
          <t>
   http://[fe80::abcd%25en1]
</t>
          <t>
Advantage: allows use of browser; consistent with general URI
       syntax.
</t>
          <t>
Disadvantage: somewhat ugly and confusing; doesn't allow simple
       cut and paste.
</t>
          
        </li>
      </ol>
    </section>
    
    <section anchor="changes" numbered="true" removeInRFC="true">
      <name>Change log</name>
      
      <ul>
      
      <li><t>draft-ietf-6man-rfc6874bis-06, 2023-03-xx:</t>
       <ul>
       <li>Noted potential exposure of MAC addresses in zone IDs.</li>
       <li>Expanded detail on lower-case normalization.</li>
       <li>Added specific use case examples.</li>
       <li>Clearly stated cut-and-paste requirement.</li>
       <li>Mentioned .local as another case of locally significant URIs.</li>
       <li>Indicated that network infrastructure devices are out of scope.</li>
       <li>Other IESG review nits.</li></ul></li>
      
      <li><t>draft-ietf-6man-rfc6874bis-05, 2022-11-07:</t>
       <ul>
       <li>Noted lower case issue.</li></ul></li>

      <li><t>draft-ietf-6man-rfc6874bis-04, 2022-10-19:</t>
       <ul>
       <li>should accept -&gt; SHOULD.</li>
       <li>Suggested maximum length of zone ID.</li></ul></li>
       
      <li><t>draft-ietf-6man-rfc6874bis-03, 2022-09-30:</t>
       <ul>
       <li>Strengthened motivation for publishing this requirement now.</li>
       <li>Removed unnecessary sentence about browsers.</li>
       <li>Noted that zone ID will be revealed to HTTP server.</li>
       <li>Noted that servers should make no use of received zone IDs.</li>
       <li>Noted that zone IDs have no length limit.</li>
       <li>Added section on scope and deployment, specifically noting that URIs with local scope are nothing new.</li>
       <li>Other Last Call clarifications and nits.</li></ul></li>
       
      
      <li><t>draft-ietf-6man-rfc6874bis-02, 2022-07-05:</t>
       <ul>
       <li>Improve discussion of URLs in HTML documents</li>
       <li>Discuss scripting attack and Modified EUI IIDs</li>
       <li>Several editorial clarifications</li>
       <li>Some nits fixed</li></ul></li> 
      
      <li><t>draft-ietf-6man-rfc6874bis-01, 2022-04-07:</t>
       <ul>
       <li>Extended use cases</li>
       <li>Clarified relationship with RFC3986 language</li>
       <li>Allow for legacy use of RFC6874 format</li>
       <li>Augmented security considerations</li>
       <li>Editorial and reference improvements</li></ul></li> 
       
      <li><t>draft-ietf-6man-rfc6874bis-00, 2022-03-19:</t>
       <ul>
       <li>WG adoption</li>
       <li>Clarified security considerations</li></ul></li>
      
      <li><t>draft-carpenter-6man-rfc6874bis-03, 2022-02-08:</t>
       <ul>
       <li>Changed to bare % signs.</li>
       <li>Added IRIs, RFC3987</li>
       <li>Editorial fixes</li></ul></li>      
      
      <li><t>draft-carpenter-6man-rfc6874bis-02, 2021-18-12:</t>
       <ul>
       <li>Give details of open issues</li>
       <li>Update authorship</li>
       <li>Editorial fixes</li></ul></li>
       
      <li><t>draft-carpenter-6man-rfc6874bis-01, 2021-07-11:</t>
       <ul><li>Added section on issues with RFC6874</li>
       <li>Removed suggested heuristic for bare % signs</li>
       <li>Editorial fixes</li></ul></li>
       
      <li><t>draft-carpenter-6man-rfc6874bis-00, 2021-07-05:</t>
       <ul><li>Initial version</li></ul></li>
      </ul>
    </section>
    
    <section anchor="ack" numbered="true">
      <name>Acknowledgements</name>
      <t>
The lack of this format was first pointed out by Margaret Wasserman and
later by Kerry Lynn. A previous draft document by Bill
Fenner and <contact fullname="Martin Dürst"/> <xref target="LITERAL-ZONE"/> discussed this topic but was not finalised.
Michael Sweet and Andrew Cady explained some of the difficulties caused by RFC 6874. The ABNF syntax proposed above
was drafted by Andrew Cady.</t>
<t>Valuable comments and contributions were made by
Karl Auer,
Carlos Bernardos,
Carsten Bormann,
Benoit Claise,
<contact fullname="Martin Dürst"/>,
David Farmer,
Stephen Farrell,
Brian Haberman,
Ted Hardie,
Philip Homburg,
Tatuya Jinmei,
Leif Johansson,
Yves Lafon,
Barry Leiba,
Ted Lemon,
Ben Maddison,
Radia Perlman,
Tom Petch,
Michael Richardson,
Tomoyuki Sahara,
<contact fullname="Jürgen Schönwälder"/>,
Nico Schottelius,
Dave Thaler,
Martin Thomson,
Philipp S. Tiesel,
Ole Troan,
<contact fullname="Éric Vyncke"/>,
Shang Ye,
several IESG members, and others.
      </t>
    </section>
    <!-- ack -->
  </back>
</rfc>
